# this is the new workflow
# if the flow is manully triggered, it will deploy to the production, if the flow is triggered by a push, it will deploy to the development
name: Build and Deploy

on:
  
  workflow_dispatch:
  push:
    branches:
      - main
      - 496-unify-workflow-v2
    paths:
      - "bots/**"
      - "libraries/**"
      - "services/**"
      - ".github/workflows/SSW.SophieBot.dev.yml"
      - ".github/workflows/scripts/**"


jobs:
  run-prod-flow:
    if: github.event_name == 'workflow_dispatch'
    uses: ./.github/workflows/workflow-deploy.yml  
    with: 
      environment: prod
    secrets: inherit

  run-dev-flow:
    if: github.event_name == 'push'
    uses: ./.github/workflows/workflow-deploy.yml  
    with: 
      environment: dev
    secrets: inherit  
        
      